(function(){var e=(typeof window!=='undefined'&&window)||(typeof exports!=='undefined'&&exports)||this;var d=e;var g=null;var i=false;var l=function(a,b){var c=function(){if(!i&&typeof this.initialize!=='undefined'){this.initialize.apply(this,arguments)}};if(b!=null){i=true;c.prototype=new b();for(var f in b){if(!m(f)){e.def(c,f,b[f])}}i=false}c.superclass=b;c.constructor=c;c.toString=function(){return a};return c};var j=function(a,b){if(a==null||b==null){return}var c=d;d=a;if(typeof b==='function'){b.call(a)}else{for(var f in b){e.def(f,b[f])}}d=c};var n=function(h,k){if(typeof k==='function'&&typeof h==='function'&&o(h)){return function(){var b=arguments,c=this.callSuper;this.callSuper=function(){var a=(arguments.length>0)?arguments:b;return k.apply(this,a)};var f=h.apply(this,b);this.callSuper=c;return f}}return h};var o=function(a){return(/\bcallSuper\b/).test(a.toString())};var m=function(a){return(/\b(prototype|superclass|constructor)\b/).test(a)};e.classify=function(){var a,b,c;if(arguments.length===3){c=arguments[0];a=arguments[1];b=arguments[2]}else{a=arguments[0];b=arguments[1]}if(typeof a==='string'){if(typeof d[a]==='undefined'){d[a]=l(a,c)}a=d[a]}var f=g;g=a.prototype;j(a,b);g=f;return a};e.def=function(){var a,b,c;if(arguments.length===3){a=arguments[0];b=arguments[1];c=arguments[2]}else{a=g||d;b=arguments[0];c=arguments[1]}c=n(c,a[b]);a[b]=c;return a[b]};e.module=function(a,b){if(typeof d[a]==='undefined'){d[a]={};d[a].toString=function(){return a}}j(d[a],b);return d[a]};e.include=function(){var a,b;if(arguments.length===2){a=arguments[0];b=arguments[1];if(typeof a==='string'){a=d[a]}}else{a=g||d;b=arguments[0]}j(a,b)};e.extend=function(){var a=g;g=null;e.include.apply(this,arguments);g=a};e.alias=function(a,b){var c=g||d;c[a]=c[b]}})();